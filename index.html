<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <!-- SEO ä¿ç•™ -->
  <meta name="robots" content="index,follow,max-snippet:-1,max-image-preview:large,max-video-preview:-1">
  <link rel="canonical" href="https://duanlian.xyz/">
  <meta http-equiv="Content-Language" content="zh-CN">
  <meta name="googlebot" content="max-snippet:-1">
  <title>æ–­è”å¤šä¹…ç®—ç»“æŸï¼Ÿåœ¨çº¿å…³ç³»æ—¶é—´è®¡ç®—å™¨ - æƒ…æ„Ÿå…³ç³»æ—¶é—´è®¡ç®—</title>

  <meta name="description" content="æ–­è”å¤šä¹…æ‰ç®—ç»“æŸï¼Ÿè¾“å…¥å¼€å§‹ä¸æ–­è”æ—¶é—´ï¼Œä¸€é”®è®¡ç®—ä½ ä»¬å·²ç»æ–­è”äº†å¤šä¹…ï¼Œå¸®ä½ æŠŠä¸€æ®µå…³ç³»åœ¨æ—¶é—´ä¸Šç®—æ¸…æ¥šï¼Œè€Œä¸æ˜¯å‡­æ„Ÿè§‰çº ç»“ã€‚" />
  <!-- Schema.org WebApplication -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "SoftwareApplication",
  "name": "æ–­è”æ—¶é—´è®¡ç®—å·¥å…·",
  "url": "https://duanlian.xyz/",
  "description": "ç”¨äºè®¡ç®—æ–­è”å¤šä¹…ã€å…³ç³»æŒç»­æ—¶é—´çš„åœ¨çº¿å·¥å…·ï¼Œå¸®åŠ©ä½ æŠŠå…³ç³»åœ¨æ—¶é—´ä¸Šç®—æ¸…æ¥šã€‚",
  "applicationCategory": "Utility",
  "operatingSystem": "All"
}
</script>

  <!-- Open Graph -->
  <meta property="og:title" content="æ–­è”å¤šä¹…ç®—ç»“æŸï¼Ÿåœ¨çº¿å…³ç³»æ—¶é—´è®¡ç®—å™¨" />
  <meta property="og:description" content="å¿«é€Ÿè®¡ç®—ä¸€æ®µå…³ç³»æŒç»­äº†å¤šä¹…ï¼Œå ç”¨äº†ä½ äººç”Ÿå¤šå°‘æ—¶é—´ï¼Œä¸æä¾›å»ºè®®ï¼Œä»…ä¾›å‚è€ƒã€‚" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://duanlian.xyz" />
  <meta property="og:image" content="https://duanlian.xyz/preview.png" />

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="æ–­è”å¤šä¹…ç®—ç»“æŸï¼Ÿåœ¨çº¿å…³ç³»æ—¶é—´è®¡ç®—å™¨">
  <meta name="twitter:description" content="å¿«é€Ÿè®¡ç®—ä¸€æ®µå…³ç³»æŒç»­äº†å¤šä¹…ï¼Œå ç”¨äº†ä½ äººç”Ÿå¤šå°‘æ—¶é—´ï¼Œä¸æä¾›å»ºè®®ï¼Œä»…ä¾›å‚è€ƒã€‚">
  <meta name="twitter:image" content="https://duanlian.xyz/preview.png">

  <!-- Plausible Analytics -->
  <script async src="https://plausible.io/js/pa-UzWKQXHoJ_r1quqGUAeMG.js"></script>
  <script>
    window.plausible = window.plausible || function () { (plausible.q = plausible.q || []).push(arguments) }
    plausible.init = plausible.init || function (i) { plausible.o = i || {} }
    plausible.init()
  </script>

  <!-- html2canvas -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

  <style>
    body {
      font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"PingFang SC","Microsoft YaHei",sans-serif;
      background: linear-gradient(160deg,#f5f7fa,#c3cfe2);
      color:#222;
      margin:0;
      padding-top:16px;
      padding-bottom:32px;
    }
    .container {
      max-width:720px;
      width:95%;
      margin:0 auto;
      padding:24px 16px 64px;
      background:#fff;
      box-sizing:border-box;
      border-radius:12px;
      box-shadow:0 4px 20px rgba(0,0,0,0.08);
    }
    h1 { font-size:28px; margin-bottom:12px; line-height:1.3;}
    h2 { font-size:22px; margin-top:40px; line-height:1.3;}
    p { line-height:1.7; margin:12px 0;}
    .intro { color:#444; margin-bottom:32px;}
    .tool { border:1px solid #e5e5e5; padding:20px; border-radius:12px; margin-bottom:32px; background:#fafafa;}
    label { display:block; margin-bottom:6px; font-weight:500;}
    input[type="date"] { width:100%; padding:12px; margin-bottom:16px; font-size:16px; box-sizing:border-box; border-radius:6px; border:1px solid #ccc;}
    button { width:100%; padding:16px; font-size:16px; border:none; border-radius:6px; background:#111; color:#fff; cursor:pointer;}
    button:hover { opacity:0.9;}
    .result { margin-top:24px; padding:20px; border-radius:12px; background:#fff; border:1px solid #ddd; display:none; box-shadow:0 2px 10px rgba(0,0,0,0.05);}
    .result strong { font-size:18px;}
    .explain { margin-top:16px; color:#444;}
    .faq p { margin-bottom:16px;}
    footer { margin-top:48px; font-size:14px; color:#666;}
    .green { color: #2a9d8f; }
    .yellow { color: #e9c46a; }
    .red { color: #e76f51; }
    .share-btn { margin-top:16px; background:#0077cc; color:#fff; }
    .share-btn:hover { opacity:0.85; }
    @media screen and (max-width: 480px) {
      h1 { font-size:24px; }
      h2 { font-size:20px; }
      input[type="date"] { padding:14px; font-size:15px; }
      button { padding:18px; font-size:15px; }
      .container { padding:16px 12px 48px; }
    }
    .share-card {
      background: linear-gradient(160deg,#0f172a,#111827);
      color: #fff;
      border-radius: 16px;
      padding: 18px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.22);
      border: 1px solid rgba(255,255,255,0.10);
    }
    .share-top {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 14px;
    }
    .brand {
      font-weight: 700;
      letter-spacing: 0.3px;
      opacity: 0.9;
    }
    .badge {
      font-size: 12px;
      padding: 6px 10px;
      border-radius: 999px;
      background: rgba(255,255,255,0.12);
      border: 1px solid rgba(255,255,255,0.14);
    }
    .share-title {
      font-size: 20px;
      line-height: 1.35;
      font-weight: 800;
      margin: 6px 0 8px;
    }
    .share-sub {
      font-size: 14px;
      line-height: 1.65;
      opacity: 0.88;
      margin-bottom: 14px;
    }
    .share-metrics {
      display: flex;
      gap: 12px;
      margin-top: 6px;
    }
    .share-metrics .m {
      flex: 1;
      background: rgba(255,255,255,0.08);
      border: 1px solid rgba(255,255,255,0.10);
      border-radius: 14px;
      padding: 12px;
    }
    .share-metrics .k {
      font-size: 12px;
      opacity: 0.75;
      margin-bottom: 6px;
    }
    .share-metrics .v {
      font-size: 26px;
      font-weight: 900;
      letter-spacing: 0.2px;
    }

    .share-foot {
      margin-top: 12px;
      padding-top: 12px;
      border-top: 1px solid rgba(255,255,255,0.12);
    }
    .share-foot .hint {
      font-size: 13px;
      opacity: 0.85;
    }
    .capture-wrap {
      position: fixed;
      left: 0;
      top: 0;
      width: 720px;
      padding: 16px;
      background: #ffffff;
      box-sizing: border-box;
      pointer-events: none;
      z-index: 999999;
      opacity: 0.001;
    }
    .watermark {
      margin-top: 8px;
      font-size: 12px;
      line-height: 1.4;
      opacity: 0.55;
      text-align: right;
    }
    /* æŠ˜å æŒ‰é’® */
    .toggle-btn{
      width:auto;
      padding:10px 12px;
      font-size:14px;
      border-radius:10px;
      background:#111;
      color:#fff;
      border:0;
      cursor:pointer;
      margin-top:10px;
    }

    /* é»˜è®¤ï¼šæŠ˜å ï¼ˆç”µè„‘ + æ‰‹æœºï¼‰ */
    .intro-more{ display:none; }

    @media screen and (max-width: 480px) {
      /* æ‰‹æœºç«¯ï¼šé¦–å±æ›´â€œçŸ­â€ */
      .intro-more{ display:none; }
      .intro-short p{ margin:10px 0; }

      /* è®©å·¥å…·æ›´é ä¸Šæ›´èšç„¦ */
      .tool{ padding:14px; }
      p{ line-height:1.75; } /* æ‰‹æœºæ›´æ˜“è¯» */
    }

    /* FAQ æ‰‹é£ç´æ ·å¼ */
    .faq details{
      border:1px solid #eee;
      border-radius:12px;
      padding:10px 12px;
      background:#fff;
      margin:10px 0;
    }
    .faq summary{
      cursor:pointer;
      font-weight:600;
      list-style:none;
    }
    .faq summary::-webkit-details-marker{ display:none; }
    .faq .faq-body{
      margin-top:8px;
      color:#444;
      line-height:1.75;
    }


  </style>
</head>

<body>
  <div class="container" id="result-card">
    <h1>æ–­è”å¤šä¹…ç®—ç»“æŸï¼Ÿ</h1>
    <p class="intro">
  è¿™æ˜¯ä¸€ä¸ª<strong>æ–­è”æ—¶é—´è®¡ç®—å·¥å…·</strong>ï¼Œå¸®åŠ©ä½ ç”¨æ—¶é—´è€Œä¸æ˜¯æ„Ÿè§‰åˆ¤æ–­å…³ç³»çŠ¶æ€ã€‚
   </p>
   <p><strong>å¾ˆå¤šäººéƒ½ä¼šé—®ï¼šæ–­è”å¤šä¹…ç®—ç»“æŸï¼Ÿ</strong>  
   </p>

<div class="intro intro-short">
  <p>
    æ–­è”å¤šä¹…æ‰ç®—ç»“æŸï¼Œå…¶å®æ²¡æœ‰ç»Ÿä¸€ç­”æ¡ˆã€‚æŠŠæ—¶é—´ç®—æ¸…æ¥šï¼Œèƒ½è®©ä½ æ›´å®¢è§‚åœ°çœ‹æ¸…å…³ç³»çŠ¶æ€ã€‚
  </p>

  <button class="toggle-btn no-capture" type="button" onclick="toggleIntro()" id="introToggle">
    å±•å¼€è¯´æ˜
  </button>

  <div class="intro-more" id="introMore">
    <p>
      æ–­è”å¤šä¹…æ‰ç®—ç»“æŸï¼Œå…¶å®æ˜¯å¾ˆå¤šäººåœ¨å…³ç³»ä¸­æœ€çº ç»“çš„é—®é¢˜ä¹‹ä¸€ã€‚
      æœ‰äº›äººå‡ å¤©æ²¡è”ç³»å°±å¼€å§‹ä¸å®‰ï¼Œæœ‰äº›äººæ–­è”å‡ ä¸ªæœˆï¼Œå†…å¿ƒå´ä¾ç„¶è§‰å¾—å…³ç³»è¿˜æ²¡æœ‰çœŸæ­£ç»“æŸã€‚
      å½“æƒ…ç»ªåå¤æ‹‰æ‰¯æ—¶ï¼Œäººå¾€å¾€å¾ˆéš¾å¯¹æ—¶é—´åšå‡ºå®¢è§‚åˆ¤æ–­ã€‚
    </p>
    <p>
      ä¸å…¶ä¸€ééå›æƒ³èŠå¤©è®°å½•ï¼Œä¸å¦‚æŠŠè¿™æ®µå…³ç³»åœ¨æ—¶é—´ä¸Šç®—æ¸…æ¥šã€‚
      é€šè¿‡è®¡ç®—å…³ç³»æŒç»­äº†å¤šä¹…ã€æ–­è”å·²ç»è¿‡å»äº†å¤šå°‘å¤©ï¼Œ
      ä½ å¯ä»¥æ›´ç›´è§‚åœ°çœ‹æ¸…è¿™æ®µå…³ç³»æ‰€å¤„çš„é˜¶æ®µï¼Œè€Œä¸æ˜¯åªå‡­æ„Ÿè§‰çº ç»“ã€‚
    </p>
    <p>
      å¦‚æœä½ æƒ³æ›´å…·ä½“åœ°äº†è§£ä¸åŒå…³ç³»ä¸­ï¼Œ
      æ–­è”æ—¶é—´é€šå¸¸æ„å‘³ç€ä»€ä¹ˆï¼Œ
      å¯ä»¥å‚è€ƒè¿™ç¯‡è¯´æ˜ï¼š
      <a href="/duanlian-guide.html">æ–­è”å¤šä¹…ç®—ç»“æŸï¼Ÿä¸åŒå…³ç³»çš„æ—¶é—´å‚è€ƒ</a>ã€‚
    </p>
  </div>
</div>


    <h2>æ–­è”æ—¶é—´è®¡ç®—å™¨</h2>
    <div class="tool" id="tool">
      <label for="startDate">å…³ç³»å¼€å§‹æ—¶é—´</label>
      <input type="date" id="startDate" />

      <label for="endDate">æ–­è”æˆ–ç»“æŸæ—¶é—´ï¼ˆå¯é€‰ï¼‰</label>
      <input type="date" id="endDate" />

      <button onclick="calculate()">è®¡ç®—è¿™æ®µå…³ç³»çš„æ—¶é—´</button>

      <div class="result" id="result">

        <!-- åˆ†äº«æˆªå›¾ä¸“ç”¨å¡ç‰‡ -->
        <div class="share-card" id="share-card">
          <div class="share-top">
            <div class="brand">duanlian.xyz</div>
            <div class="badge" id="stageBadge">é˜¶æ®µ</div>
          </div>

          <div class="share-title" id="shareTitle">
            ä½ ä¸æ˜¯æ”¾ä¸ä¸‹ï¼Œæ˜¯ä½ è¿˜åœ¨ç­‰ä¸€ä¸ªè§£é‡Šã€‚
          </div>

          <div class="share-sub" id="shareSub">
            æŠŠæ—¶é—´ç®—æ¸…æ¥šï¼Œä¸æ˜¯ä¸ºäº†è¯æ˜è°å¯¹è°é”™ï¼Œæ˜¯ä¸ºäº†è®©è‡ªå·±ä¸å†è¢«æƒ…ç»ªç‰µç€èµ°ã€‚
          </div>

          <div class="share-metrics">
            <div class="m">
              <div class="k">å…³ç³»æ€»é•¿åº¦</div>
              <div class="v" id="days">-</div>
            </div>
            <div class="m">
              <div class="k">æ–­è”å·²è¿‡å»</div>
              <div class="v" id="breakDays">-</div>
            </div>
          </div>

          <div class="share-foot">
            <div class="hint" id="shareHint">
              æç¤ºï¼šæ•°å­—ä¸æ˜¯ç­”æ¡ˆï¼Œä½†å®ƒä¼šè®©ä½ æ›´æ¸…é†’ã€‚
            </div>
            <div class="watermark">
              è®¡ç®—æ¥è‡ª duanlian.xyz Â· æœ¬åœ°è®¡ç®— Â· è®¡ç®—ç»“æœä¸ä¸Šä¼ 
            </div>
          </div>
        </div> <!-- âœ… è¿™é‡Œè¡¥ä¸Šï¼šclose share-card -->

        <!-- é¡µé¢å†…è¡¥å……è¯´æ˜ï¼ˆä¸è¿›å…¥æˆªå›¾ï¼‰ -->
        <div class="no-capture">
          <p>ä½ ç°åœ¨çœ‹åˆ°çš„æ˜¯æ—¶é—´çš„ç»“æœã€‚</p>
          <p>å®ƒä¸ä¼šæ›¿ä½ åšå†³å®šï¼Œä½†èƒ½å¸®ä½ ç¡®è®¤ï¼šä½ åˆ°åº•åœ¨è¿™æ®µå…³ç³»é‡Œåœç•™äº†å¤šä¹…ã€‚</p>
        </div>


        <button class="share-btn no-capture" onclick="shareResult()">ç”Ÿæˆåˆ†äº«å›¾ç‰‡</button>
      </div>
    </div>
    
    <!-- åŒ¿åä¸€å¥è¯ï¼ˆå»ºè®®ä½ç½®ï¼šè®¡ç®—å™¨åï¼‰ -->
    <section id="anon-one-liner" style="margin:18px 0 26px;">
      <div style="padding:14px 14px;border:1px solid #eaeaea;border-radius:12px;background:#fff;">
        <div style="font-weight:700;margin-bottom:8px;">ğŸ’­ åŒ¿åä¸€å¥è¯</div>

        <div id="oneLinerText" style="line-height:1.75;margin-bottom:12px;color:#222;">
          åŠ è½½ä¸­â€¦
        </div>

        <!-- ç”¨ toggle-btn è®©æŒ‰é’®ä¸è¦å æ»¡æ•´è¡Œï¼ˆä½ ç«™å†…å·²æœ‰æ ·å¼ï¼‰ -->
        <button id="openModalBtn" class="toggle-btn" type="button">
          âœï¸ æˆ‘ä¹Ÿæƒ³è¯´ä¸€å¥
        </button>

        <div id="oneLinerHint" style="margin-top:10px;color:#888;font-size:12px;"></div>
      </div>
    </section>
    <!-- å¼¹çª— -->
    <div id="anonModal" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,.45);z-index:999999;">
      <div style="background:#fff;max-width:560px;margin:10vh auto;padding:16px;border-radius:12px;">
        <div style="font-weight:700;margin-bottom:8px;">ä½ ç°åœ¨æœ€æƒ³è¯´çš„ä¸€å¥è¯æ˜¯ï¼Ÿ</div>

        <input
          id="anonInput"
          maxlength="50"
          placeholder="æ¯”å¦‚ï¼šæˆ‘çŸ¥é“è¯¥æ–­è”ï¼Œå¯æˆ‘çœŸçš„å¾ˆæƒ³ä»–ã€‚"
          style="width:100%;padding:12px;border:1px solid #ddd;border-radius:10px;font-size:16px;box-sizing:border-box;"
        />

        <div style="margin-top:12px;display:flex;gap:8px;justify-content:flex-end;">
          <!-- è¿™é‡Œç”¨ toggle-btnï¼Œé¿å…ç»§æ‰¿ä½ å…¨å±€ button{width:100%} çš„å¤§æŒ‰é’®æ•ˆæœ -->
          <button id="cancelBtn" class="toggle-btn" type="button">å–æ¶ˆ</button>
          <button id="submitBtn" class="toggle-btn" type="button">åŒ¿åå‘å¸ƒ</button>
        </div>

        <div id="modalHint" style="margin-top:8px;color:#888;font-size:12px;"></div>
      </div>
    </div>


      <section>
        <h2>æ–­è”ä¸åŒå¤©æ•°ï¼Œé€šå¸¸æ„å‘³ç€ä»€ä¹ˆï¼Ÿ</h2>
        <p>æŠŠå¤©æ•°ç®—æ¸…æ¥šåªæ˜¯ç¬¬ä¸€æ­¥ã€‚ä¸åŒé˜¶æ®µï¼Œä½ çš„ç„¦è™‘ç‚¹å’Œå¯¹æ–¹çš„å¿ƒç†å˜åŒ–å¹¶ä¸ä¸€æ ·ã€‚</p>
        <ul>
          <li><a href="/duanlian/duanlian-7-days.html">æ–­è” 7 å¤©ï¼šä»–ä¸ºä»€ä¹ˆè¿˜æ²¡è”ç³»ä½ ï¼Ÿ</a></li>
          <li><a href="/duanlian/duanlian-14-days.html">æ–­è” 14 å¤©ï¼šå¯¹æ–¹ä¼šå¼€å§‹æƒ³ä½ å—ï¼Ÿ</a></li>
          <li><a href="/duanlian/duanlian-21-days.html">æ–­è” 21 å¤©ï¼šåè½¬æœŸè¿˜æ˜¯è¯¯åˆ¤æœŸï¼Ÿ</a></li>
          <li><a href="/duanlian/duanlian-30-days.html">æ–­è” 30 å¤©ï¼šç»§ç»­ç­‰ï¼Œè¿˜æ˜¯æ¢ç­–ç•¥ï¼Ÿ</a></li>
        </ul>
      </section>


    <h2 id="faq">æ–­è”å¤šä¹…ç®—ç»“æŸï¼Ÿå¸¸è§é—®é¢˜</h2>


    <div class="faq">
      <details>
        <summary>ä»€ä¹ˆæ˜¯æ–­è”ï¼Ÿ</summary>
        <div class="faq-body">
          æ–­è”é€šå¸¸æŒ‡åŒæ–¹åœ¨ä¸€æ®µå…³ç³»ä¸­ï¼Œä¸»åŠ¨æˆ–è¢«åŠ¨åœ°åœæ­¢è”ç³»ï¼ŒåŒ…æ‹¬ä¸å†èŠå¤©ã€ä¸å†è§é¢ï¼Œä¹Ÿä¸å†é€šè¿‡ä»»ä½•æ–¹å¼ä¿æŒäº’åŠ¨ã€‚
          æœ‰äº›æ–­è”æ˜¯æš‚æ—¶çš„ï¼Œæœ‰äº›åˆ™æ„å‘³ç€å…³ç³»æ­£åœ¨èµ°å‘ç»“æŸã€‚
        </div>
      </details>

      <details>
        <summary>æ–­è”å¤šä¹…æ‰ç®—ç»“æŸï¼Ÿ</summary>
        <div class="faq-body">
          å¹¶ä¸å­˜åœ¨ä¸€ä¸ªç»å¯¹ç»Ÿä¸€çš„æ—¶é—´æ ‡å‡†ã€‚å¯¹æœ‰äº›äººæ¥è¯´ï¼Œå‡ å‘¨æ²¡æœ‰è”ç³»å°±å·²ç»æ˜¯ç»“æŸï¼›
          å¯¹å¦ä¸€äº›äººæ¥è¯´ï¼Œå³ä½¿å‡ ä¸ªæœˆä¸è”ç³»ï¼Œå†…å¿ƒä»ç„¶è®¤ä¸ºå…³ç³»å°šæœªçœŸæ­£ç»“æŸã€‚
          æ—¶é—´æœ¬èº«ä¸ä¼šç»™å‡ºç­”æ¡ˆï¼Œä½†å¯ä»¥å¸®åŠ©ä½ æ›´æ¸…æ¥šåœ°çœ‹æ¸…ç°çŠ¶ã€‚
        </div>
      </details>

      <details>
        <summary>ä¸ºä»€ä¹ˆè¦è®¡ç®—æ–­è”æ—¶é—´ï¼Ÿ</summary>
        <div class="faq-body">
          å¾ˆå¤šæ—¶å€™ï¼Œäººæ”¾ä¸ä¸‹ï¼Œå¹¶ä¸æ˜¯å› ä¸ºæ„Ÿæƒ…æœ‰å¤šæ·±ï¼Œè€Œæ˜¯å› ä¸ºå·²ç»æŠ•å…¥äº†å¤ªå¤šæ—¶é—´ã€‚
          æŠŠæ—¶é—´ç®—æ¸…æ¥šï¼Œå¯ä»¥å¸®åŠ©ä½ è·³å‡ºæƒ…ç»ªï¼Œç”¨æ›´å®¢è§‚çš„è§’åº¦çœ‹å¾…è¿™æ®µå…³ç³»ã€‚
        </div>
      </details>

      <details>
        <summary>æ–­è”æ—¶é—´è¶Šä¹…ï¼Œå…³ç³»å°±è¶Šå®¹æ˜“ç»“æŸå—ï¼Ÿ</summary>
        <div class="faq-body">
          æ—¶é—´å¹¶ä¸ä¸€å®šå†³å®šç»“æœï¼Œä½†å®ƒå¾€å¾€ä¼šæ”¹å˜äººçš„åˆ¤æ–­ã€‚
          éšç€æ–­è”æ—¶é—´æ‹‰é•¿ï¼Œæƒ…ç»ªä¼šé€æ¸å†·å´ï¼Œä¾èµ–æ„Ÿä¹Ÿä¼šå‘ç”Ÿå˜åŒ–ï¼Œ
          å¾ˆå¤šäººæ­£æ˜¯åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæ…¢æ…¢æ¥å—äº†å…³ç³»å·²ç»ç»“æŸçš„äº‹å®ã€‚
        </div>
      </details>

      <details>
        <summary>è¿™ä¸ªç»“æœä»£è¡¨ä»€ä¹ˆï¼Ÿ</summary>
        <div class="faq-body">
          è®¡ç®—ç»“æœåªä»£è¡¨ä¸€æ®µå…³ç³»åœ¨æ—¶é—´ä¸Šçš„é•¿åº¦ï¼Œ
          ä¸ä»£è¡¨æ„Ÿæƒ…çš„å¥½åï¼Œä¹Ÿä¸ä»£è¡¨ä½ åº”è¯¥åšå‡ºä»€ä¹ˆé€‰æ‹©ã€‚
          å®ƒåªæ˜¯ä¸€ä¸ªå‚è€ƒï¼Œè€Œä¸æ˜¯ç»“è®ºã€‚
        </div>
      </details>

      <details>
        <summary>é€‚ç”¨äºå“ªäº›å…³ç³»ï¼Ÿ</summary>
        <div class="faq-body">
          æ— è®ºæ˜¯æ‹çˆ±ã€æš§æ˜§ã€åˆ†å¼€åä»æœ‰è”ç³»ï¼Œ
          è¿˜æ˜¯å·²ç»è¿›å…¥æ–­è”é˜¶æ®µä½†å†…å¿ƒä»ç„¶çº ç»“çš„å…³ç³»ï¼Œ
          åªè¦ä½ è§‰å¾—â€œè¿˜æ²¡å½»åº•ç»“æŸâ€ï¼Œéƒ½å¯ä»¥ä½¿ç”¨è¿™ä¸ªå·¥å…·ã€‚
        </div>
      </details>

      <details>
        <summary>ä½ ä»¬ä¼šä¿å­˜æˆ‘çš„æ•°æ®å—ï¼Ÿ</summary>
        <div class="faq-body">
          ä¸ä¼šã€‚æ‰€æœ‰è®¡ç®—éƒ½åœ¨ä½ çš„æµè§ˆå™¨ä¸­å®Œæˆï¼Œ
          è®¡ç®—è¿‡ç¨‹åœ¨æœ¬åœ°å®Œæˆï¼Œä¸ä¸Šä¼ æ—¥æœŸç­‰ä¸ªäººè®¡ç®—æ•°æ®ï¼›åŒ¿åä¸€å¥è¯ä¼šä¿å­˜ä½ è¾“å…¥çš„æ–‡æœ¬å†…å®¹ï¼Œç”¨äºåœ¨é¦–é¡µå±•ç¤º
        </div>
      </details>
    </div>



<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [{
    "@type": "Question",
    "name": "æ–­è”å¤šä¹…æ‰ç®—ç»“æŸï¼Ÿ",
    "acceptedAnswer": {
      "@type": "Answer",
      "text": "å¹¶ä¸å­˜åœ¨ç»Ÿä¸€çš„æ—¶é—´æ ‡å‡†ã€‚ä¸åŒçš„äººã€ä¸åŒçš„å…³ç³»ï¼Œå¯¹æ–­è”ç»“æŸçš„åˆ¤æ–­å·®å¼‚å¾ˆå¤§ï¼Œæ—¶é—´åªèƒ½ä½œä¸ºå‚è€ƒã€‚"
    }
  },{
    "@type": "Question",
    "name": "ä»€ä¹ˆæ˜¯æ–­è”ï¼Ÿ",
    "acceptedAnswer": {
      "@type": "Answer",
      "text": "æ–­è”é€šå¸¸æŒ‡åŒæ–¹åœ¨ä¸€æ®µå…³ç³»ä¸­ä¸»åŠ¨æˆ–è¢«åŠ¨åœæ­¢è”ç³»ï¼ŒåŒ…æ‹¬ä¸å†èŠå¤©ã€ä¸å†è§é¢ã€‚"
    }
  }]
}
</script>


    <footer>
      <p>æœ¬å·¥å…·ä»…ç”¨äºæ—¶é—´è®¡ç®—ä¸å‚è€ƒï¼Œä¸æ„æˆä»»ä½•æƒ…æ„Ÿæˆ–å¿ƒç†å»ºè®®ã€‚</p>
      <p><a href="/about.html">å…³äºè¿™ä¸ªå·¥å…·</a></p>
      <p>æ›´å¤šæ–­è”ç›¸å…³å·¥å…·ï¼š<span style="color:#aaa">å³å°†ä¸Šçº¿</span></p>
    </footer>
  </div>

  <script>
    let LAST_BLOB = null;
    let LAST_FILE = null;

    function calculate() {
      const startInput = document.getElementById("startDate").value;
      const endInputRaw = document.getElementById("endDate").value;
      const today = new Date();
      const todayUTC = Date.UTC(today.getFullYear(), today.getMonth(), today.getDate());

      if(!startInput){ alert("è¯·é€‰æ‹©å…³ç³»å¼€å§‹æ—¶é—´"); return; }

      const startDate = new Date(startInput);
      const endDate = endInputRaw ? new Date(endInputRaw) : today;

      if(isNaN(startDate.getTime()) || isNaN(endDate.getTime())){
        alert("æ—¥æœŸæ ¼å¼é”™è¯¯"); return;
      }
      if(endDate < startDate){ alert("ç»“æŸæ—¶é—´ä¸èƒ½æ—©äºå¼€å§‹æ—¶é—´"); return; }

      const utcStart = Date.UTC(startDate.getFullYear(), startDate.getMonth(), startDate.getDate());
      const utcEnd = Date.UTC(endDate.getFullYear(), endDate.getMonth(), endDate.getDate());

      // å…³ç³»æ€»å¤©æ•°
      const totalDays = Math.floor((utcEnd - utcStart)/(1000*60*60*24)) + 1;

      // æ–­è”å¤©æ•°
      const breakDaysRaw = Math.floor((todayUTC - utcEnd)/(1000*60*60*24)) + 1;
      const breakDays = Math.max(0, breakDaysRaw);


      document.getElementById("days").innerText = `${totalDays} å¤©`;
      document.getElementById("breakDays").innerText = `${breakDays} å¤©`;

       // é˜¶æ®µåˆ¤æ–­ï¼ˆæƒ…ç»ªåŒ–è¡¨è¾¾ï¼Œç”¨äºåˆ†äº«å¡ï¼‰
      let badgeText = "";
      let titleText = "";
      let subText = "";
      let hintText = "";

      if (breakDays <= 7) {
        badgeText = "ğŸŸ¢ 0â€“7 å¤©ï½œæƒ…ç»ªæœªå†·å´";
        titleText = "ä½ ä¸æ˜¯æ”¾ä¸ä¸‹ï¼Œæ˜¯ä½ è¿˜åœ¨ç­‰ä¸€ä¸ªè§£é‡Šã€‚";
        subText = "è¿™å‡ å¤©æœ€å®¹æ˜“å†²åŠ¨ï¼šä¸æ˜¯æƒ³è”ç³» TAï¼Œæ˜¯æƒ³è®©è‡ªå·±åˆ«é‚£ä¹ˆéš¾å—ã€‚";
        hintText = "å…ˆåˆ«æ€¥ç€åšå†³å®šï¼Œä½ ç°åœ¨å¤§å¤šæ˜¯åœ¨æƒ…ç»ªé‡Œã€‚";
      } else if (breakDays <= 30) {
        badgeText = "ğŸŸ¡ 8â€“30 å¤©ï½œé€‚åº”åˆ†ç¦»";
        titleText = "ä½ å¼€å§‹æ¸…é†’äº†ï¼Œä½†å¿ƒè¿˜æ²¡è·Ÿä¸Šã€‚";
        subText = "ä½ èƒ½æ­£å¸¸ç”Ÿæ´»äº†ï¼Œä½†æŸäº›ç¬é—´è¿˜æ˜¯ä¼šè¢«æ‹‰å›å»ã€‚";
        hintText = "ä½ ä¸æ˜¯é€€æ­¥ï¼Œè€Œæ˜¯åœ¨æˆ’æ–­è¿™æ®µå…³ç³»ã€‚";
      } else {
        badgeText = "ğŸ”´ 31+ å¤©ï½œå…³ç³»å·²ç»“æŸ";
        titleText = "ä½ ä¸æ˜¯å¿˜äº†ï¼Œæ˜¯ç»ˆäºä¸å†ä¸º TA æ‰¾ç†ç”±ã€‚";
        subText = "çœŸæ­£çš„ç»“æŸï¼Œä¸æ˜¯æ–­è”ï¼Œè€Œæ˜¯ä½ ä¸å†åå¤è¯æ˜å½“åˆæ²¡çœ‹é”™ã€‚";
        hintText = "æ—¶é—´ä¸ä¼šç»™ç­”æ¡ˆï¼Œä½†ä¼šæ›¿ä½ è¿‡æ»¤æ‰å¹»æƒ³ã€‚";
      }

      document.getElementById("stageBadge").innerText = badgeText;
      document.getElementById("shareTitle").innerText = titleText;
      document.getElementById("shareSub").innerText = subText;
      document.getElementById("shareHint").innerText = hintText;

      //document.getElementById("stage").innerHTML = stageHtml;
      document.getElementById("result").style.display = "block";
      window.location.hash = "#result";
    }

    function isMobileDevice() {
      return /Android|iPhone|iPad|iPod/i.test(navigator.userAgent);
    }

    async function shareResult() {
      const hiddenEls = document.querySelectorAll(".no-capture");

      const restore = () => {
        hiddenEls.forEach(el => {
          el.style.display = el.dataset._display || "";
          delete el.dataset._display;
        });
      };

      // æˆªå›¾å‰éšè—ä¸éœ€è¦çš„å…ƒç´ 
      hiddenEls.forEach(el => {
        el.dataset._display = el.style.display;
        el.style.display = "none";
      });

      try {
        const card = document.getElementById("share-card");
        if (!card) {
          alert("è¯·å…ˆç‚¹è®¡ç®—ï¼Œå†ç”Ÿæˆåˆ†äº«å›¾ç‰‡");
          return;
        }

        // ç­‰å­—ä½“åŠ è½½ï¼ˆç§»åŠ¨ç«¯éå¸¸å…³é”®ï¼‰
        if (document.fonts && document.fonts.ready) {
          await document.fonts.ready;
        }

        // ç›´æ¥æˆªå¡ç‰‡ï¼ˆæ¯”æˆª body å†è£å‰ªç¨³å®šï¼‰
        const scale = Math.min(2, window.devicePixelRatio || 2);
        const canvas = await html2canvas(card, {
          backgroundColor: "#ffffff",
          scale,
          useCORS: true
        });

        // âœ… ç§»åŠ¨ç«¯ï¼šä¼˜å…ˆèµ°ç³»ç»Ÿåˆ†äº«ï¼ˆæ›´åƒâ€œä¿å­˜åˆ°ç›¸å†Œâ€ï¼‰ï¼Œä¸æ”¯æŒå†å¼¹å±‚é¢„è§ˆ
        if (isMobileDevice()) {
          canvas.toBlob(async (blob) => {
            if (!blob) {
              alert("ç”Ÿæˆå›¾ç‰‡å¤±è´¥");
              return;
            }

            const file = new File([blob], "æ–­è”æ—¶é—´ç»“æœ.png", { type: "image/png" });

            // 1) ä¼˜å…ˆ Web Shareï¼ˆiOS/Android æ”¯æŒåº¦æ›´å¥½ï¼›ç”¨æˆ·å¯åœ¨åˆ†äº«é¢æ¿é‡Œâ€œå­˜å‚¨å›¾åƒâ€ï¼‰
            try {
              if (navigator.canShare && navigator.canShare({ files: [file] })) {
                // âœ… iOS ä¸Šï¼šä¸è¦åœ¨ç”Ÿæˆåç«‹åˆ» shareï¼ˆä¼šä¸¢ç”¨æˆ·æ‰‹åŠ¿ï¼‰
                // åªä¿å­˜ blob/fileï¼Œç„¶åå¼¹å±‚è®©ç”¨æˆ·å†ç‚¹ä¸€æ¬¡â€œåˆ†äº«â€
                LAST_BLOB = blob;
                LAST_FILE = new File([blob], "æ–­è”æ—¶é—´ç»“æœ.png", { type: "image/png" });

                showMobilePreview(blob); // ç»§ç»­ç”¨ä½ çš„å¼¹å±‚
                restore();
                return;

              }
            } catch (e) {
              // åˆ†äº«å¤±è´¥å°±èµ°é¢„è§ˆ
              console.warn("share failed:", e);
            }

            // 2) fallbackï¼šå½“å‰é¡µå¼¹å±‚é¢„è§ˆ + Blob URL + â€œæ‰“å¼€å›¾ç‰‡â€é“¾æ¥
            showMobilePreview(blob);
            restore();
          }, "image/png");

          return; // âš ï¸ ç§»åŠ¨ç«¯èµ°åˆ°è¿™é‡Œå°±ç»“æŸï¼Œä¸èµ° PC ä¸‹è½½é€»è¾‘
        }


        // âœ… ç”µè„‘ç«¯ï¼šç›´æ¥ä¸‹è½½
        canvas.toBlob((blob) => {
          if (!blob) return;
          const url = URL.createObjectURL(blob);
          const link = document.createElement("a");
          link.href = url;
          link.download = "æ–­è”æ—¶é—´ç»“æœ.png";
          document.body.appendChild(link);
          link.click();
          link.remove();
          URL.revokeObjectURL(url);
        }, "image/png");

      } catch (err) {
        console.error(err);
        alert("æˆªå›¾å¤±è´¥ï¼šè¯·æ‰“å¼€æ§åˆ¶å°æŸ¥çœ‹é”™è¯¯");
      } finally {
        restore();
      }
    }
    
    function showMobilePreview(blob) {
      const url = URL.createObjectURL(blob);

      // å¼¹å±‚
      const overlay = document.createElement("div");
      overlay.id = "saveOverlay";
      overlay.style.cssText = `
        position:fixed; inset:0; z-index:999999;
        background:rgba(0,0,0,.85);
        display:flex; flex-direction:column;
        align-items:center; justify-content:center;
        padding:16px; box-sizing:border-box;
      `;

      // é¡¶éƒ¨æŒ‰é’®åŒº
      const bar = document.createElement("div");
      bar.style.cssText = `
        width:100%; max-width:720px;
        display:flex; gap:10px; margin-bottom:12px;
      `;

      const btnClose = document.createElement("button");
      btnClose.textContent = "å…³é—­";
      btnClose.style.cssText = `flex:1; padding:12px; border-radius:10px; border:0;`;

      const aOpen = document.createElement("a");
      aOpen.textContent = "æ‰“å¼€å›¾ç‰‡";
      aOpen.href = url;
      aOpen.target = "_blank";
      aOpen.rel = "noopener";
      aOpen.style.cssText = `
        flex:1; padding:12px; border-radius:10px;
        background:#fff; color:#000; text-align:center;
        text-decoration:none; font-family:inherit;
      `;

        const btnShare = document.createElement("button");
        btnShare.textContent = "åˆ†äº«";
        btnShare.style.cssText = `flex:1; padding:12px; border-radius:10px; border:0;`;

        btnShare.onclick = () => {
          // å¿…é¡»ç”±ç”¨æˆ·å†æ¬¡ç‚¹å‡»è§¦å‘ï¼ŒiOS æ‰å…è®¸
          if (!LAST_FILE) {
            alert("è¯·å…ˆç”Ÿæˆå›¾ç‰‡");
            return;
          }
          if (navigator.share) {
            navigator.share({ files: [LAST_FILE], title: "æ–­è”æ—¶é—´ç»“æœ" })
              .catch(err => console.warn("share failed:", err));
          } else {
            alert("å½“å‰æµè§ˆå™¨ä¸æ”¯æŒç³»ç»Ÿåˆ†äº«ï¼Œè¯·ç‚¹â€œæ‰“å¼€å›¾ç‰‡â€åç”¨æµè§ˆå™¨åˆ†äº«æŒ‰é’®ä¿å­˜ã€‚");
          }
        };

        bar.appendChild(btnClose);
        bar.appendChild(btnShare);
        bar.appendChild(aOpen);


      // å›¾ç‰‡
      const img = document.createElement("img");
      img.src = url;
      img.alt = "ç»“æœå›¾ç‰‡";
      img.style.cssText = `
        max-width:100%; max-height:75vh;
        border-radius:14px; background:#fff;
      `;
      // âš ï¸ å…³é”®ï¼šä¸è¦ç¦ç”¨é•¿æŒ‰èœå•ï¼ˆåˆ«åŠ  user-select:none / touch-callout:noneï¼‰

      // æç¤ºæ–‡æ¡ˆ
      const hint = document.createElement("div");
      hint.style.cssText = `
        margin-top:12px; color:#fff; opacity:.9;
        font-size:14px; text-align:center; line-height:1.6;
      `;
      hint.innerHTML = `é•¿æŒ‰å›¾ç‰‡ â†’ ä¿å­˜åˆ°ç›¸å†Œ<br/>å¦‚æœæ²¡æœ‰â€œä¿å­˜â€ï¼Œç‚¹â€œæ‰“å¼€å›¾ç‰‡â€åå†é•¿æŒ‰`;

      overlay.appendChild(bar);
      overlay.appendChild(img);
      overlay.appendChild(hint);
      document.body.appendChild(overlay);

      const cleanup = () => {
        URL.revokeObjectURL(url);
        overlay.remove();
      };
      btnClose.onclick = cleanup;
      overlay.addEventListener("click", (e) => {
        if (e.target === overlay) cleanup();
      });
    }

    function toggleIntro() {
      const more = document.getElementById("introMore");
      const btn = document.getElementById("introToggle");
      if (!more || !btn) return;

      const isHidden = getComputedStyle(more).display === "none";
      more.style.display = isHidden ? "block" : "none";
      btn.textContent = isHidden ? "æ”¶èµ·è¯´æ˜" : "å±•å¼€è¯´æ˜";
    }


  </script>
  <script>
    // ===== é…ç½® =====
    const API_URL = "/api/messages";  // åŒåŸŸï¼šduanlian.xyz/api/messages

    // ===== DOM =====
    const oneLinerText = document.getElementById("oneLinerText");
    const oneLinerHint = document.getElementById("oneLinerHint");

    const modal = document.getElementById("anonModal");
    const openModalBtn = document.getElementById("openModalBtn");
    const cancelBtn = document.getElementById("cancelBtn");
    const submitBtn = document.getElementById("submitBtn");
    const input = document.getElementById("anonInput");
    const modalHint = document.getElementById("modalHint");

    // ===== å·¥å…· =====
    function normalizeText(s) {
      return String(s || "").trim().replace(/\s+/g, " ");
    }

    function openModal() {
      modal.style.display = "block";
      input.value = "";
      modalHint.textContent = "";
      input.focus();
    }

    function closeModal() {
      modal.style.display = "none";
    }

    // ===== æ‹‰å–ä¸€å¥è¯ =====
    async function loadOneLiner() {
      oneLinerText.textContent = "åŠ è½½ä¸­â€¦";
      oneLinerHint.textContent = "";

      try {
        const res = await fetch(API_URL, { method: "GET" });
        const json = await res.json();

        if (!json.ok) {
          oneLinerText.textContent = "åŠ è½½å¤±è´¥ï¼ˆæ¥å£è¿”å›å¼‚å¸¸ï¼‰";
          return;
        }

        const list = json.data || [];
        if (list.length === 0) {
          oneLinerText.textContent = "è¿˜æ²¡æœ‰äººè¯´è¯ï¼Œä½ æ¥åšç¬¬ä¸€ä¸ªï¼Ÿ";
          return;
        }

        // éšæœºæŒ‘ä¸€æ¡ï¼Œè®©â€œæ­¤åˆ»æœ‰äººåœ¨è¿™é‡Œâ€çš„æ„Ÿè§‰æ›´å¼º
        const pick = list[Math.floor(Math.random() * list.length)];
        oneLinerText.textContent = "â€œ" + pick.text + "â€";

        // ï¼ˆå¯é€‰ï¼‰æ˜¾ç¤ºç®€å•çš„â€œä»Šå¤©æœ‰äººåœ¨è¿™é‡Œâ€æç¤º
        oneLinerHint.textContent = "åˆ·æ–°ä¼šçœ‹åˆ°ä¸åŒçš„ä¸€å¥ã€‚";
      } catch (e) {
        oneLinerText.textContent = "åŠ è½½å¤±è´¥ï¼ˆç½‘ç»œé”™è¯¯ï¼‰";
      }
    }

    // ===== æäº¤ä¸€å¥è¯ =====
    async function submitOneLiner() {
      const text = normalizeText(input.value);

      if (!text) {
        modalHint.textContent = "å…ˆå†™ä¸€å¥è¯å†å‘å¸ƒï½";
        return;
      }
      if (text.length > 50) {
        modalHint.textContent = "æœ€å¤š 50 ä¸ªå­—ã€‚";
        return;
      }

      submitBtn.disabled = true;
      modalHint.textContent = "å‘å¸ƒä¸­â€¦";

      try {
        const res = await fetch(API_URL, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ text })
        });

        const json = await res.json();

        if (!json.ok) {
          if (res.status === 429) {
            const ms = json.retry_after_ms || 0;
            const sec = Math.max(1, Math.ceil(ms / 1000));
            modalHint.textContent = `å‘å¾—æœ‰ç‚¹å¿«ï¼Œ${sec} ç§’åå†è¯•ï½`;
          } else {
            modalHint.textContent = json.error || "å‘å¸ƒå¤±è´¥";
          }
          return;
        }

        // æˆåŠŸï¼šç«‹åˆ»æ›´æ–°é¦–é¡µæ˜¾ç¤º
        oneLinerText.textContent = "â€œ" + text + "â€";
        oneLinerHint.textContent = "å·²å‘å¸ƒã€‚è°¢è°¢ä½ ç•™ä¸‹ä¸€å¥è¯ã€‚";
        modalHint.textContent = "å·²å‘å¸ƒ";

        setTimeout(() => closeModal(), 300);
      } catch (e) {
        modalHint.textContent = "ç½‘ç»œé”™è¯¯ï¼Œç¨åå†è¯•";
      } finally {
        submitBtn.disabled = false;
      }
    }

    // ===== äº‹ä»¶ç»‘å®š =====
    openModalBtn.addEventListener("click", openModal);
    cancelBtn.addEventListener("click", closeModal);

    // ç‚¹å‡»é®ç½©å…³é—­
    modal.addEventListener("click", (e) => {
      if (e.target === modal) closeModal();
    });

    submitBtn.addEventListener("click", submitOneLiner);

    // å›è½¦æäº¤
    input.addEventListener("keydown", (e) => {
      if (e.key === "Enter") submitOneLiner();
      if (e.key === "Escape") closeModal();
    });

    // é¦–æ¬¡åŠ è½½
    loadOneLiner();
  </script>



</body>
</html>
