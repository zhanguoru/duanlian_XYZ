<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <!-- SEO ä¿ç•™ -->
  <meta name="robots" content="index,follow,max-snippet:-1,max-image-preview:large,max-video-preview:-1">
  <link rel="canonical" href="https://duanlian.xyz/">
  <meta http-equiv="Content-Language" content="zh-CN">
  <meta name="googlebot" content="max-snippet:-1">
  <title>æ–­è”å¤šä¹…ç®—ç»“æŸï¼Ÿåœ¨çº¿å…³ç³»æ—¶é—´è®¡ç®—å™¨ - æƒ…æ„Ÿå…³ç³»æ—¶é—´è®¡ç®—</title>

  <meta name="description" content="æ–­è”å¤šä¹…æ‰ç®—ç»“æŸï¼Ÿè¾“å…¥å¼€å§‹ä¸æ–­è”æ—¶é—´ï¼Œä¸€é”®è®¡ç®—ä½ ä»¬å·²ç»æ–­è”äº†å¤šä¹…ï¼Œå¸®ä½ æŠŠä¸€æ®µå…³ç³»åœ¨æ—¶é—´ä¸Šç®—æ¸…æ¥šï¼Œè€Œä¸æ˜¯å‡­æ„Ÿè§‰çº ç»“ã€‚" />
  <!-- Schema.org WebApplication -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "SoftwareApplication",
  "name": "æ–­è”æ—¶é—´è®¡ç®—å·¥å…·",
  "url": "https://duanlian.xyz/",
  "description": "ç”¨äºè®¡ç®—æ–­è”å¤šä¹…ã€å…³ç³»æŒç»­æ—¶é—´çš„åœ¨çº¿å·¥å…·ï¼Œå¸®åŠ©ä½ æŠŠå…³ç³»åœ¨æ—¶é—´ä¸Šç®—æ¸…æ¥šã€‚",
  "applicationCategory": "Utility",
  "operatingSystem": "All"
}
</script>

  <!-- Open Graph -->
  <meta property="og:title" content="æ–­è”å¤šä¹…ç®—ç»“æŸï¼Ÿåœ¨çº¿å…³ç³»æ—¶é—´è®¡ç®—å™¨" />
  <meta property="og:description" content="å¿«é€Ÿè®¡ç®—ä¸€æ®µå…³ç³»æŒç»­äº†å¤šä¹…ï¼Œå ç”¨äº†ä½ äººç”Ÿå¤šå°‘æ—¶é—´ï¼Œä¸æä¾›å»ºè®®ï¼Œä»…ä¾›å‚è€ƒã€‚" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://duanlian.xyz" />
  <meta property="og:image" content="https://duanlian.xyz/preview.png" />

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="æ–­è”å¤šä¹…ç®—ç»“æŸï¼Ÿåœ¨çº¿å…³ç³»æ—¶é—´è®¡ç®—å™¨">
  <meta name="twitter:description" content="å¿«é€Ÿè®¡ç®—ä¸€æ®µå…³ç³»æŒç»­äº†å¤šä¹…ï¼Œå ç”¨äº†ä½ äººç”Ÿå¤šå°‘æ—¶é—´ï¼Œä¸æä¾›å»ºè®®ï¼Œä»…ä¾›å‚è€ƒã€‚">
  <meta name="twitter:image" content="https://duanlian.xyz/preview.png">

  <!-- Plausible Analytics -->
  <script async src="https://plausible.io/js/pa-UzWKQXHoJ_r1quqGUAeMG.js"></script>
  <script>
    window.plausible = window.plausible || function () { (plausible.q = plausible.q || []).push(arguments) }
    plausible.init = plausible.init || function (i) { plausible.o = i || {} }
    plausible.init()
  </script>

  <!-- html2canvas -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

  <style>
    body {
      font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"PingFang SC","Microsoft YaHei",sans-serif;
      background: linear-gradient(160deg,#f5f7fa,#c3cfe2);
      color:#222;
      margin:0;
      padding-top:16px;
      padding-bottom:32px;
    }
    .container {
      max-width:720px;
      width:95%;
      margin:0 auto;
      padding:24px 16px 64px;
      background:#fff;
      box-sizing:border-box;
      border-radius:12px;
      box-shadow:0 4px 20px rgba(0,0,0,0.08);
    }
    h1 { font-size:28px; margin-bottom:12px; line-height:1.3;}
    h2 { font-size:22px; margin-top:40px; line-height:1.3;}
    p { line-height:1.7; margin:12px 0;}
    .intro { color:#444; margin-bottom:32px;}
    .tool { border:1px solid #e5e5e5; padding:20px; border-radius:12px; margin-bottom:32px; background:#fafafa;}
    label { display:block; margin-bottom:6px; font-weight:500;}
    input[type="date"] { width:100%; padding:12px; margin-bottom:16px; font-size:16px; box-sizing:border-box; border-radius:6px; border:1px solid #ccc;}
    button { width:100%; padding:16px; font-size:16px; border:none; border-radius:6px; background:#111; color:#fff; cursor:pointer;}
    button:hover { opacity:0.9;}
    .result { margin-top:24px; padding:20px; border-radius:12px; background:#fff; border:1px solid #ddd; display:none; box-shadow:0 2px 10px rgba(0,0,0,0.05);}
    .result strong { font-size:18px;}
    .explain { margin-top:16px; color:#444;}
    .faq p { margin-bottom:16px;}
    footer { margin-top:48px; font-size:14px; color:#666;}
    .green { color: #2a9d8f; }
    .yellow { color: #e9c46a; }
    .red { color: #e76f51; }
    .share-btn { margin-top:16px; background:#0077cc; color:#fff; }
    .share-btn:hover { opacity:0.85; }
    @media screen and (max-width: 480px) {
      h1 { font-size:24px; }
      h2 { font-size:20px; }
      input[type="date"] { padding:14px; font-size:15px; }
      button { padding:18px; font-size:15px; }
      .container { padding:16px 12px 48px; }
    }
    .share-card {
      background: linear-gradient(160deg,#0f172a,#111827);
      color: #fff;
      border-radius: 16px;
      padding: 18px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.22);
      border: 1px solid rgba(255,255,255,0.10);
    }
    .share-top {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 14px;
    }
    .brand {
      font-weight: 700;
      letter-spacing: 0.3px;
      opacity: 0.9;
    }
    .badge {
      font-size: 12px;
      padding: 6px 10px;
      border-radius: 999px;
      background: rgba(255,255,255,0.12);
      border: 1px solid rgba(255,255,255,0.14);
    }
    .share-title {
      font-size: 20px;
      line-height: 1.35;
      font-weight: 800;
      margin: 6px 0 8px;
    }
    .share-sub {
      font-size: 14px;
      line-height: 1.65;
      opacity: 0.88;
      margin-bottom: 14px;
    }
    .share-metrics {
      display: flex;
      gap: 12px;
      margin-top: 6px;
    }
    .share-metrics .m {
      flex: 1;
      background: rgba(255,255,255,0.08);
      border: 1px solid rgba(255,255,255,0.10);
      border-radius: 14px;
      padding: 12px;
    }
    .share-metrics .k {
      font-size: 12px;
      opacity: 0.75;
      margin-bottom: 6px;
    }
    .share-metrics .v {
      font-size: 26px;
      font-weight: 900;
      letter-spacing: 0.2px;
    }

    .share-foot {
      margin-top: 12px;
      padding-top: 12px;
      border-top: 1px solid rgba(255,255,255,0.12);
    }
    .share-foot .hint {
      font-size: 13px;
      opacity: 0.85;
    }
    .capture-wrap {
      position: fixed;
      left: 0;
      top: 0;
      width: 720px;
      padding: 16px;
      background: #ffffff;
      box-sizing: border-box;
      pointer-events: none;
      z-index: 999999;
      opacity: 0.001;
    }
    .watermark {
      margin-top: 8px;
      font-size: 12px;
      line-height: 1.4;
      opacity: 0.55;
      text-align: right;
    }


  </style>
</head>

<body>
  <div class="container" id="result-card">
    <h1>æ–­è”å¤šä¹…ç®—ç»“æŸï¼Ÿ</h1>
    <p class="intro">
  è¿™æ˜¯ä¸€ä¸ª<strong>æ–­è”æ—¶é—´è®¡ç®—å·¥å…·</strong>ï¼Œç”¨äºè®¡ç®—ä¸€æ®µå…³ç³»æŒç»­äº†å¤šä¹…ï¼Œä»¥åŠæ–­è”å·²ç»è¿‡å»äº†å¤šå°‘å¤©ï¼Œå¸®åŠ©ä½ ç”¨æ—¶é—´è€Œä¸æ˜¯æ„Ÿè§‰åˆ¤æ–­å…³ç³»çŠ¶æ€ã€‚
   </p>
   <p><strong>å¾ˆå¤šäººéƒ½ä¼šé—®ï¼šæ–­è”å¤šä¹…ç®—ç»“æŸï¼Ÿ</strong>  
     å…¶å®å¹¶æ²¡æœ‰ä¸€ä¸ªç»Ÿä¸€ç­”æ¡ˆï¼Œä½†æ—¶é—´æœ¬èº«å¯ä»¥è¢«è®¡ç®—æ¸…æ¥šã€‚</p>

<div class="intro">
  <p>
    æ–­è”å¤šä¹…æ‰ç®—ç»“æŸï¼Œå…¶å®æ˜¯å¾ˆå¤šäººåœ¨å…³ç³»ä¸­æœ€çº ç»“çš„é—®é¢˜ä¹‹ä¸€ã€‚
    æœ‰äº›äººå‡ å¤©æ²¡è”ç³»å°±å¼€å§‹ä¸å®‰ï¼Œæœ‰äº›äººæ–­è”å‡ ä¸ªæœˆï¼Œå†…å¿ƒå´ä¾ç„¶è§‰å¾—å…³ç³»è¿˜æ²¡æœ‰çœŸæ­£ç»“æŸã€‚
    å½“æƒ…ç»ªåå¤æ‹‰æ‰¯æ—¶ï¼Œäººå¾€å¾€å¾ˆéš¾å¯¹æ—¶é—´åšå‡ºå®¢è§‚åˆ¤æ–­ã€‚
  </p>
  <p>
    ä¸å…¶ä¸€ééå›æƒ³èŠå¤©è®°å½•ï¼Œä¸å¦‚æŠŠè¿™æ®µå…³ç³»åœ¨æ—¶é—´ä¸Šç®—æ¸…æ¥šã€‚
    é€šè¿‡è®¡ç®—å…³ç³»æŒç»­äº†å¤šä¹…ã€æ–­è”å·²ç»è¿‡å»äº†å¤šå°‘å¤©ï¼Œ
    ä½ å¯ä»¥æ›´ç›´è§‚åœ°çœ‹æ¸…è¿™æ®µå…³ç³»æ‰€å¤„çš„é˜¶æ®µï¼Œè€Œä¸æ˜¯åªå‡­æ„Ÿè§‰çº ç»“ã€‚
  </p>
  <p>
    å¦‚æœä½ æƒ³æ›´å…·ä½“åœ°äº†è§£ä¸åŒå…³ç³»ä¸­ï¼Œ
    æ–­è”æ—¶é—´é€šå¸¸æ„å‘³ç€ä»€ä¹ˆï¼Œ
    å¯ä»¥å‚è€ƒè¿™ç¯‡è¯´æ˜ï¼š
    <a href="/duanlian-guide.html">æ–­è”å¤šä¹…ç®—ç»“æŸï¼Ÿä¸åŒå…³ç³»çš„æ—¶é—´å‚è€ƒ</a>ã€‚
  </p>
</div>

    <h2>æ–­è”æ—¶é—´è®¡ç®—å™¨</h2>
    <div class="tool" id="tool">
      <label for="startDate">å…³ç³»å¼€å§‹æ—¶é—´</label>
      <input type="date" id="startDate" />

      <label for="endDate">æ–­è”æˆ–ç»“æŸæ—¶é—´ï¼ˆå¯é€‰ï¼‰</label>
      <input type="date" id="endDate" />

      <button onclick="calculate()">è®¡ç®—è¿™æ®µå…³ç³»çš„æ—¶é—´</button>

      <div class="result" id="result">

        <!-- åˆ†äº«æˆªå›¾ä¸“ç”¨å¡ç‰‡ -->
        <div class="share-card" id="share-card">
          <div class="share-top">
            <div class="brand">duanlian.xyz</div>
            <div class="badge" id="stageBadge">é˜¶æ®µ</div>
          </div>

          <div class="share-title" id="shareTitle">
            ä½ ä¸æ˜¯æ”¾ä¸ä¸‹ï¼Œæ˜¯ä½ è¿˜åœ¨ç­‰ä¸€ä¸ªè§£é‡Šã€‚
          </div>

          <div class="share-sub" id="shareSub">
            æŠŠæ—¶é—´ç®—æ¸…æ¥šï¼Œä¸æ˜¯ä¸ºäº†è¯æ˜è°å¯¹è°é”™ï¼Œæ˜¯ä¸ºäº†è®©è‡ªå·±ä¸å†è¢«æƒ…ç»ªç‰µç€èµ°ã€‚
          </div>

          <div class="share-metrics">
            <div class="m">
              <div class="k">å…³ç³»æ€»é•¿åº¦</div>
              <div class="v" id="days">-</div>
            </div>
            <div class="m">
              <div class="k">æ–­è”å·²è¿‡å»</div>
              <div class="v" id="breakDays">-</div>
            </div>
          </div>

          <div class="share-foot">
            <div class="hint" id="shareHint">
              æç¤ºï¼šæ•°å­—ä¸æ˜¯ç­”æ¡ˆï¼Œä½†å®ƒä¼šè®©ä½ æ›´æ¸…é†’ã€‚
            </div>
            <div class="watermark">
              è®¡ç®—æ¥è‡ª duanlian.xyz Â· æœ¬åœ°è®¡ç®— Â· ä¸ä¿å­˜ä»»ä½•æ•°æ®
            </div>
          </div>
        </div> <!-- âœ… è¿™é‡Œè¡¥ä¸Šï¼šclose share-card -->

        <!-- é¡µé¢å†…è¡¥å……è¯´æ˜ï¼ˆä¸è¿›å…¥æˆªå›¾ï¼‰ -->
        <div class="no-capture">
          <p>ä½ ç°åœ¨çœ‹åˆ°çš„æ˜¯æ—¶é—´çš„ç»“æœã€‚</p>
          <p>å®ƒä¸ä¼šæ›¿ä½ åšå†³å®šï¼Œä½†èƒ½å¸®ä½ ç¡®è®¤ï¼šä½ åˆ°åº•åœ¨è¿™æ®µå…³ç³»é‡Œåœç•™äº†å¤šä¹…ã€‚</p>
        </div>


        <button class="share-btn no-capture" onclick="shareResult()">ç”Ÿæˆåˆ†äº«å›¾ç‰‡</button>
      </div>
    </div>

    <h2 id="faq">æ–­è”å¤šä¹…ç®—ç»“æŸï¼Ÿå¸¸è§é—®é¢˜</h2>


<div class="faq">
  <p>
    <strong>ä»€ä¹ˆæ˜¯æ–­è”ï¼Ÿ</strong><br />
    æ–­è”é€šå¸¸æŒ‡åŒæ–¹åœ¨ä¸€æ®µå…³ç³»ä¸­ï¼Œä¸»åŠ¨æˆ–è¢«åŠ¨åœ°åœæ­¢è”ç³»ï¼ŒåŒ…æ‹¬ä¸å†èŠå¤©ã€ä¸å†è§é¢ï¼Œä¹Ÿä¸å†é€šè¿‡ä»»ä½•æ–¹å¼ä¿æŒäº’åŠ¨ã€‚
    æœ‰äº›æ–­è”æ˜¯æš‚æ—¶çš„ï¼Œæœ‰äº›åˆ™æ„å‘³ç€å…³ç³»æ­£åœ¨èµ°å‘ç»“æŸã€‚
  </p>

  <p>
    <strong>æ–­è”å¤šä¹…æ‰ç®—ç»“æŸï¼Ÿ</strong><br />
    å¹¶ä¸å­˜åœ¨ä¸€ä¸ªç»å¯¹ç»Ÿä¸€çš„æ—¶é—´æ ‡å‡†ã€‚å¯¹æœ‰äº›äººæ¥è¯´ï¼Œå‡ å‘¨æ²¡æœ‰è”ç³»å°±å·²ç»æ˜¯ç»“æŸï¼›
    å¯¹å¦ä¸€äº›äººæ¥è¯´ï¼Œå³ä½¿å‡ ä¸ªæœˆä¸è”ç³»ï¼Œå†…å¿ƒä»ç„¶è®¤ä¸ºå…³ç³»å°šæœªçœŸæ­£ç»“æŸã€‚
    æ—¶é—´æœ¬èº«ä¸ä¼šç»™å‡ºç­”æ¡ˆï¼Œä½†å¯ä»¥å¸®åŠ©ä½ æ›´æ¸…æ¥šåœ°çœ‹æ¸…ç°çŠ¶ã€‚
  </p>

  <p>
    <strong>ä¸ºä»€ä¹ˆè¦è®¡ç®—æ–­è”æ—¶é—´ï¼Ÿ</strong><br />
    å¾ˆå¤šæ—¶å€™ï¼Œäººæ”¾ä¸ä¸‹ï¼Œå¹¶ä¸æ˜¯å› ä¸ºæ„Ÿæƒ…æœ‰å¤šæ·±ï¼Œè€Œæ˜¯å› ä¸ºå·²ç»æŠ•å…¥äº†å¤ªå¤šæ—¶é—´ã€‚
    æŠŠæ—¶é—´ç®—æ¸…æ¥šï¼Œå¯ä»¥å¸®åŠ©ä½ è·³å‡ºæƒ…ç»ªï¼Œç”¨æ›´å®¢è§‚çš„è§’åº¦çœ‹å¾…è¿™æ®µå…³ç³»ã€‚
  </p>

  <p>
    <strong>æ–­è”æ—¶é—´è¶Šä¹…ï¼Œå…³ç³»å°±è¶Šå®¹æ˜“ç»“æŸå—ï¼Ÿ</strong><br />
    æ—¶é—´å¹¶ä¸ä¸€å®šå†³å®šç»“æœï¼Œä½†å®ƒå¾€å¾€ä¼šæ”¹å˜äººçš„åˆ¤æ–­ã€‚
    éšç€æ–­è”æ—¶é—´æ‹‰é•¿ï¼Œæƒ…ç»ªä¼šé€æ¸å†·å´ï¼Œä¾èµ–æ„Ÿä¹Ÿä¼šå‘ç”Ÿå˜åŒ–ï¼Œ
    å¾ˆå¤šäººæ­£æ˜¯åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæ…¢æ…¢æ¥å—äº†å…³ç³»å·²ç»ç»“æŸçš„äº‹å®ã€‚
  </p>

  <p>
    <strong>è¿™ä¸ªç»“æœä»£è¡¨ä»€ä¹ˆï¼Ÿ</strong><br />
    è®¡ç®—ç»“æœåªä»£è¡¨ä¸€æ®µå…³ç³»åœ¨æ—¶é—´ä¸Šçš„é•¿åº¦ï¼Œ
    ä¸ä»£è¡¨æ„Ÿæƒ…çš„å¥½åï¼Œä¹Ÿä¸ä»£è¡¨ä½ åº”è¯¥åšå‡ºä»€ä¹ˆé€‰æ‹©ã€‚
    å®ƒåªæ˜¯ä¸€ä¸ªå‚è€ƒï¼Œè€Œä¸æ˜¯ç»“è®ºã€‚
  </p>

  <p>
    <strong>é€‚ç”¨äºå“ªäº›å…³ç³»ï¼Ÿ</strong><br />
    æ— è®ºæ˜¯æ‹çˆ±ã€æš§æ˜§ã€åˆ†å¼€åä»æœ‰è”ç³»ï¼Œ
    è¿˜æ˜¯å·²ç»è¿›å…¥æ–­è”é˜¶æ®µä½†å†…å¿ƒä»ç„¶çº ç»“çš„å…³ç³»ï¼Œ
    åªè¦ä½ è§‰å¾—â€œè¿˜æ²¡å½»åº•ç»“æŸâ€ï¼Œéƒ½å¯ä»¥ä½¿ç”¨è¿™ä¸ªå·¥å…·ã€‚
  </p>

  <p>
    <strong>ä½ ä»¬ä¼šä¿å­˜æˆ‘çš„æ•°æ®å—ï¼Ÿ</strong><br />
    ä¸ä¼šã€‚æ‰€æœ‰è®¡ç®—éƒ½åœ¨ä½ çš„æµè§ˆå™¨ä¸­å®Œæˆï¼Œ
    ä¸ä¼šè¢«è®°å½•ã€å­˜å‚¨æˆ–ä¸Šä¼ ï¼Œä»»ä½•ä¸ªäººä¿¡æ¯éƒ½ä¸ä¼šè¢«æ”¶é›†ã€‚
  </p>
</div>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [{
    "@type": "Question",
    "name": "æ–­è”å¤šä¹…æ‰ç®—ç»“æŸï¼Ÿ",
    "acceptedAnswer": {
      "@type": "Answer",
      "text": "å¹¶ä¸å­˜åœ¨ç»Ÿä¸€çš„æ—¶é—´æ ‡å‡†ã€‚ä¸åŒçš„äººã€ä¸åŒçš„å…³ç³»ï¼Œå¯¹æ–­è”ç»“æŸçš„åˆ¤æ–­å·®å¼‚å¾ˆå¤§ï¼Œæ—¶é—´åªèƒ½ä½œä¸ºå‚è€ƒã€‚"
    }
  },{
    "@type": "Question",
    "name": "ä»€ä¹ˆæ˜¯æ–­è”ï¼Ÿ",
    "acceptedAnswer": {
      "@type": "Answer",
      "text": "æ–­è”é€šå¸¸æŒ‡åŒæ–¹åœ¨ä¸€æ®µå…³ç³»ä¸­ä¸»åŠ¨æˆ–è¢«åŠ¨åœæ­¢è”ç³»ï¼ŒåŒ…æ‹¬ä¸å†èŠå¤©ã€ä¸å†è§é¢ã€‚"
    }
  }]
}
</script>


    <footer>
      <p>æœ¬å·¥å…·ä»…ç”¨äºæ—¶é—´è®¡ç®—ä¸å‚è€ƒï¼Œä¸æ„æˆä»»ä½•æƒ…æ„Ÿæˆ–å¿ƒç†å»ºè®®ã€‚</p>
      <p><a href="/about.html">å…³äºè¿™ä¸ªå·¥å…·</a></p>
      <p>æ›´å¤šæ–­è”ç›¸å…³å·¥å…·ï¼š<span style="color:#aaa">å³å°†ä¸Šçº¿</span></p>
    </footer>
  </div>

  <script>

    function calculate() {
      const startInput = document.getElementById("startDate").value;
      const endInputRaw = document.getElementById("endDate").value;
      const today = new Date();
      const todayUTC = Date.UTC(today.getFullYear(), today.getMonth(), today.getDate());

      if(!startInput){ alert("è¯·é€‰æ‹©å…³ç³»å¼€å§‹æ—¶é—´"); return; }

      const startDate = new Date(startInput);
      const endDate = endInputRaw ? new Date(endInputRaw) : today;

      if(isNaN(startDate.getTime()) || isNaN(endDate.getTime())){
        alert("æ—¥æœŸæ ¼å¼é”™è¯¯"); return;
      }
      if(endDate < startDate){ alert("ç»“æŸæ—¶é—´ä¸èƒ½æ—©äºå¼€å§‹æ—¶é—´"); return; }

      const utcStart = Date.UTC(startDate.getFullYear(), startDate.getMonth(), startDate.getDate());
      const utcEnd = Date.UTC(endDate.getFullYear(), endDate.getMonth(), endDate.getDate());

      // å…³ç³»æ€»å¤©æ•°
      const totalDays = Math.floor((utcEnd - utcStart)/(1000*60*60*24)) + 1;

      // æ–­è”å¤©æ•°
      const breakDaysRaw = Math.floor((todayUTC - utcEnd)/(1000*60*60*24)) + 1;
      const breakDays = Math.max(0, breakDaysRaw);


      document.getElementById("days").innerText = `${totalDays} å¤©`;
      document.getElementById("breakDays").innerText = `${breakDays} å¤©`;

       // é˜¶æ®µåˆ¤æ–­ï¼ˆæƒ…ç»ªåŒ–è¡¨è¾¾ï¼Œç”¨äºåˆ†äº«å¡ï¼‰
      let badgeText = "";
      let titleText = "";
      let subText = "";
      let hintText = "";

      if (breakDays <= 7) {
        badgeText = "ğŸŸ¢ 0â€“7 å¤©ï½œæƒ…ç»ªæœªå†·å´";
        titleText = "ä½ ä¸æ˜¯æ”¾ä¸ä¸‹ï¼Œæ˜¯ä½ è¿˜åœ¨ç­‰ä¸€ä¸ªè§£é‡Šã€‚";
        subText = "è¿™å‡ å¤©æœ€å®¹æ˜“å†²åŠ¨ï¼šä¸æ˜¯æƒ³è”ç³» TAï¼Œæ˜¯æƒ³è®©è‡ªå·±åˆ«é‚£ä¹ˆéš¾å—ã€‚";
        hintText = "å…ˆåˆ«æ€¥ç€åšå†³å®šï¼Œä½ ç°åœ¨å¤§å¤šæ˜¯åœ¨æƒ…ç»ªé‡Œã€‚";
      } else if (breakDays <= 30) {
        badgeText = "ğŸŸ¡ 8â€“30 å¤©ï½œé€‚åº”åˆ†ç¦»";
        titleText = "ä½ å¼€å§‹æ¸…é†’äº†ï¼Œä½†å¿ƒè¿˜æ²¡è·Ÿä¸Šã€‚";
        subText = "ä½ èƒ½æ­£å¸¸ç”Ÿæ´»äº†ï¼Œä½†æŸäº›ç¬é—´è¿˜æ˜¯ä¼šè¢«æ‹‰å›å»ã€‚";
        hintText = "ä½ ä¸æ˜¯é€€æ­¥ï¼Œè€Œæ˜¯åœ¨æˆ’æ–­è¿™æ®µå…³ç³»ã€‚";
      } else {
        badgeText = "ğŸ”´ 31+ å¤©ï½œå…³ç³»å·²ç»“æŸ";
        titleText = "ä½ ä¸æ˜¯å¿˜äº†ï¼Œæ˜¯ç»ˆäºä¸å†ä¸º TA æ‰¾ç†ç”±ã€‚";
        subText = "çœŸæ­£çš„ç»“æŸï¼Œä¸æ˜¯æ–­è”ï¼Œè€Œæ˜¯ä½ ä¸å†åå¤è¯æ˜å½“åˆæ²¡çœ‹é”™ã€‚";
        hintText = "æ—¶é—´ä¸ä¼šç»™ç­”æ¡ˆï¼Œä½†ä¼šæ›¿ä½ è¿‡æ»¤æ‰å¹»æƒ³ã€‚";
      }

      document.getElementById("stageBadge").innerText = badgeText;
      document.getElementById("shareTitle").innerText = titleText;
      document.getElementById("shareSub").innerText = subText;
      document.getElementById("shareHint").innerText = hintText;

      //document.getElementById("stage").innerHTML = stageHtml;
      document.getElementById("result").style.display = "block";
      window.location.hash = "#result";
    }

    function isMobileDevice() {
      return /Android|iPhone|iPad|iPod/i.test(navigator.userAgent);
    }

    async function shareResult() {
      const hiddenEls = document.querySelectorAll(".no-capture");

      const restore = () => {
        hiddenEls.forEach(el => {
          el.style.display = el.dataset._display || "";
          delete el.dataset._display;
        });
      };

      // æˆªå›¾å‰éšè—ä¸éœ€è¦çš„å…ƒç´ 
      hiddenEls.forEach(el => {
        el.dataset._display = el.style.display;
        el.style.display = "none";
      });

      try {
        const card = document.getElementById("share-card");
        if (!card) {
          alert("è¯·å…ˆç‚¹è®¡ç®—ï¼Œå†ç”Ÿæˆåˆ†äº«å›¾ç‰‡");
          return;
        }

        // ç­‰å­—ä½“åŠ è½½ï¼ˆç§»åŠ¨ç«¯éå¸¸å…³é”®ï¼‰
        if (document.fonts && document.fonts.ready) {
          await document.fonts.ready;
        }

        // ç›´æ¥æˆªå¡ç‰‡ï¼ˆæ¯”æˆª body å†è£å‰ªç¨³å®šï¼‰
        const scale = Math.min(2, window.devicePixelRatio || 2);
        const canvas = await html2canvas(card, {
          backgroundColor: "#ffffff",
          scale,
          useCORS: true
        });

        // âœ… ç§»åŠ¨ç«¯ï¼šæ‰“å¼€é¢„è§ˆé¡µï¼Œè®©ç”¨æˆ·é•¿æŒ‰ä¿å­˜
        if (isMobileDevice()) {
          const dataUrl = canvas.toDataURL("image/png");

          const win = window.open();
          if (!win) {
            // è¢«æ‹¦æˆªæ—¶ï¼šé€€åŒ–ä¸ºåœ¨å½“å‰é¡µæ‰“å¼€ï¼ˆå…¼å®¹å¾®ä¿¡/æ‹¦æˆªå¼¹çª—åœºæ™¯ï¼‰
            window.location.href = dataUrl;
            return;
          }

          win.document.open();
          win.document.write(`
            <!DOCTYPE html>
            <html lang="zh-CN">
            <head>
              <meta charset="UTF-8" />
              <meta name="viewport" content="width=device-width, initial-scale=1.0" />
              <title>é•¿æŒ‰ä¿å­˜å›¾ç‰‡</title>
              <style>
                body{margin:0;background:#000;height:100vh;display:flex;align-items:center;justify-content:center;}
                img{max-width:100%;max-height:100%;-webkit-user-select:none;user-select:none;}
                .hint{position:fixed;left:0;right:0;bottom:18px;text-align:center;
                      color:#fff;font-size:14px;opacity:.85;padding:0 12px;}
              </style>
            </head>
            <body>
              <img src="${dataUrl}" alt="ç»“æœå›¾ç‰‡" />
              <div class="hint">é•¿æŒ‰å›¾ç‰‡ â†’ ä¿å­˜åˆ°ç›¸å†Œ</div>
            </body>
            </html>
          `);
          win.document.close();
          return;
        }

        // âœ… ç”µè„‘ç«¯ï¼šç›´æ¥ä¸‹è½½
        canvas.toBlob((blob) => {
          if (!blob) return;
          const url = URL.createObjectURL(blob);
          const link = document.createElement("a");
          link.href = url;
          link.download = "æ–­è”æ—¶é—´ç»“æœ.png";
          document.body.appendChild(link);
          link.click();
          link.remove();
          URL.revokeObjectURL(url);
        }, "image/png");

      } catch (err) {
        console.error(err);
        alert("æˆªå›¾å¤±è´¥ï¼šè¯·æ‰“å¼€æ§åˆ¶å°æŸ¥çœ‹é”™è¯¯");
      } finally {
        restore();
      }
    }


  </script>
</body>
</html>
